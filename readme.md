## 双摆模拟器

本项目受到 `2swap` 的[视频](https://www.youtube.com/watch?v=dtjb2OhEQcU)启发。他指出，双摆并非完全混沌，在某些区域也能呈现出一定的周期性。

通过观察不同起点开始模拟的双摆，可以发现：有些邻域内的双摆马上分道扬镳，而有些区域的在较长时间后仍然比较接近。将平面上的点映射为双摆的起始参数，根据一段时间后的模拟结果给每个点上色，可以直观看出每个区域的混沌程度。

### 参数设置

双摆拥有但不限于以下几个自由度：两杆的角度、两杆的角速度、杆长之比、两锤质量之比、两锤所受重力之比、两锤所受重力夹角。

将以上8个参数两两一组分为4组，对于一个给定的8维坐标，固定6维并在邻域内枚举2维进行模拟计算，可以获得一张图片，图片的中心点即为选定的坐标。

参数的具体定义如下：以竖直向下为0，逆时针旋转为正方向定义杆的角度；以角度增加为正方向定义角速度；以下杆长度除以上杆长度定义杆长之比，该值经过归一化：坐标系中坐标 $x$ 代表杆长之比为 $x+\sqrt{x^2+1}$ ；以下锤质量除以上锤质量定义质量之比，该值经过归一化：坐标系中坐标 $x$ 代表质量之比为 $x+\sqrt{x^2+1}$ ；假定上锤所受重力加速度为 $g=1$ 竖直向下，定义下锤所受重力加速度向右的分量为 $g_x$ ，向下的分量为 $g_y$ 。

初始坐标为 $(0,0,0,0,0,0,0,1)$ ，经过归一化后，杆长、质量之比均为1。

涂色方案如下：设两杆角度分别为 $x,y$ ，使用如下公式映射到 $(r,g,b)$ 空间：
$$
r=120\sin y+128\\
g=60(\sin x+\cos y)+128\\
b=120\cos x+128
$$
双摆运动的微分方程推导在项目的 `pendulum.md` 文件中。

### 操作方式

使用空格键切换到下一个窗口，使用 `w` 和 `s` 键放大或缩小，使用 `q` 键暂停/开始当前窗口，使用 `e` 键切换显示模式。鼠标左键点击平移当前窗口，鼠标右键点击设置其他3个窗口的参数。

### 环境与编译

要运行该项目，你至少需要1张支持 `OpenCL` 的显卡和 `Windows` 系统。

要编译该项目，你需要安装 `g++` 。编译命令在项目的 `make.bat` 文件中。